# Sistema de CapacitaciÃ³n Empresarial

> AplicaciÃ³n web empresarial para la gestiÃ³n integral de programas de capacitaciÃ³n, desarrollada con **Spring Boot 3** y arquitectura de capas.

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.x-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Java](https://img.shields.io/badge/Java-17-orange.svg)](https://www.oracle.com/java/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)](https://www.mysql.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## ğŸ“‹ Tabla de Contenidos

- [DescripciÃ³n General](#-descripciÃ³n-general)
- [CaracterÃ­sticas Principales](#-caracterÃ­sticas-principales)
- [Stack TecnolÃ³gico](#-stack-tecnolÃ³gico)
- [Requisitos Previos](#-requisitos-previos)
- [InstalaciÃ³n y ConfiguraciÃ³n](#-instalaciÃ³n-y-configuraciÃ³n)
- [Roles y AutenticaciÃ³n](#-roles-y-autenticaciÃ³n)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [API REST](#-api-rest)
- [NavegaciÃ³n Web](#-navegaciÃ³n-web)
- [Diagramas del Sistema](#-diagramas-del-sistema)
- [Pruebas](#-pruebas)
- [Autor](#-autor)

---

## ğŸ¯ DescripciÃ³n General

Sistema integral de gestiÃ³n de capacitaciones que permite administrar cursos, instructores, empleados e inscripciones a travÃ©s de una interfaz web intuitiva y una API REST segura. Implementa autenticaciÃ³n por roles y control de acceso granular mediante Spring Security.

### Funcionalidades Clave

- **GestiÃ³n de Cursos**: CreaciÃ³n, ediciÃ³n y seguimiento del estado de programas de capacitaciÃ³n
- **AdministraciÃ³n de Instructores**: Base de datos de facilitadores con especialidades
- **Control de Inscripciones**: Proceso automatizado de registro con validaciÃ³n de cupos
- **Panel por Roles**: Interfaces diferenciadas para administradores y empleados
- **API REST Segura**: Endpoints protegidos con autenticaciÃ³n bÃ¡sica

---

## âœ¨ CaracterÃ­sticas Principales

- âœ… AutenticaciÃ³n y autorizaciÃ³n con **Spring Security 6**
- âœ… Arquitectura MVC con separaciÃ³n de responsabilidades
- âœ… Persistencia de datos con **Spring Data JPA**
- âœ… Vistas dinÃ¡micas con **Thymeleaf**
- âœ… DiseÃ±o responsive con **TailwindCSS**
- âœ… API REST con documentaciÃ³n integrada
- âœ… ValidaciÃ³n de datos en mÃºltiples capas
- âœ… Manejo centralizado de excepciones

---

## ğŸ›  Stack TecnolÃ³gico

### Backend
- **Java 17** - Lenguaje de programaciÃ³n
- **Spring Boot 3.5.x** - Framework principal
- **Spring Security 6** - AutenticaciÃ³n y autorizaciÃ³n
- **Spring Data JPA** - Capa de persistencia
- **Spring MVC** - Arquitectura web

### Frontend
- **Thymeleaf** - Motor de plantillas
- **TailwindCSS** - Framework CSS (CDN)
- **HTML5 / JavaScript**

### Base de Datos
- **MySQL 8.0** - Sistema de gestiÃ³n de base de datos

### Seguridad
- **BCrypt** - EncriptaciÃ³n de contraseÃ±as
- **HTTP Basic Authentication** - Seguridad API REST

---

## ğŸ“¦ Requisitos Previos

Antes de comenzar, asegÃºrate de tener instalado:

- **JDK 17** o superior
- **Maven 3.8+**
- **MySQL 8.0+**
- **IDE recomendado**: IntelliJ IDEA, Eclipse o VS Code

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### 1. Clonar el Repositorio

```bash
git clone https://github.com/tu-usuario/M6_EV_PORTAFOLIO.git
cd M6_EV_PORTAFOLIO
```

### 2. Configurar Base de Datos

#### Crear la base de datos

```sql
CREATE DATABASE sistema_autenticacion
    CHARACTER SET utf8mb4
    COLLATE utf8mb4_unicode_ci;
```

#### Crear tablas principales

```sql
-- Tabla de usuarios
CREATE TABLE usuarios (
    username VARCHAR(50) COLLATE utf8mb4_unicode_ci PRIMARY KEY,
    password VARCHAR(60) COLLATE utf8mb4_unicode_ci NOT NULL,
    role VARCHAR(20) COLLATE utf8mb4_unicode_ci NOT NULL
) ENGINE=InnoDB;

-- Tabla de empleados
CREATE TABLE empleados (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    rut VARCHAR(20),
    nombres VARCHAR(100) NOT NULL,
    apellidos VARCHAR(100) NOT NULL,
    email_corporativo VARCHAR(150),
    email_personal VARCHAR(150),
    departamento VARCHAR(100),
    activo TINYINT(1) NOT NULL DEFAULT 1,
    username VARCHAR(50) COLLATE utf8mb4_unicode_ci,
    CONSTRAINT fk_empleados_usuario
        FOREIGN KEY (username)
        REFERENCES usuarios (username)
        ON DELETE SET NULL
        ON UPDATE CASCADE
) ENGINE=InnoDB;

-- Tabla de instructores
CREATE TABLE instructores (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre_completo VARCHAR(150),
    email VARCHAR(150),
    telefono VARCHAR(30),
    especialidad VARCHAR(100),
    activo TINYINT(1)
) ENGINE=InnoDB;

-- Tabla de cursos
CREATE TABLE cursos (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(150),
    descripcion TEXT,
    fecha_inicio DATE,
    fecha_fin DATE,
    duracion_horas INT,
    cupo_maximo INT,
    estado VARCHAR(20),
    instructor_id BIGINT,
    FOREIGN KEY (instructor_id) REFERENCES instructores(id)
) ENGINE=InnoDB;

-- Tabla de inscripciones
CREATE TABLE inscripciones (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    fecha_inscripcion DATETIME,
    estado VARCHAR(20),
    empleado_id BIGINT,
    curso_id BIGINT,
    FOREIGN KEY (empleado_id) REFERENCES empleados(id),
    FOREIGN KEY (curso_id) REFERENCES cursos(id)
) ENGINE=InnoDB;
```

#### Insertar datos de prueba

```sql
-- Usuarios del sistema (contraseÃ±as encriptadas con BCrypt)
INSERT INTO usuarios VALUES
('admin', '$2a$10$HagaloUstedMismoAdmin', 'ADMIN'),
('user', '$2a$10$ClaveBcryptUser', 'EMPLEADO');

-- Empleado vinculado al usuario
INSERT INTO empleados (rut, nombres, apellidos, email_corporativo, email_personal, departamento, activo, username)
VALUES ('11.111.111-1', 'MatÃ­as', 'Rojas', 'matias.rojas@empresa.cl', 'matias@gmail.com', 'TI', 1, 'user');

-- Instructores
INSERT INTO instructores (nombre_completo, email, telefono, especialidad, activo)
VALUES
('Ana PÃ©rez', 'ana.perez@empresa.cl', '987654321', 'Java Backend', 1),
('Carlos Soto', 'carlos.soto@empresa.cl', '912345678', 'Seguridad InformÃ¡tica', 1);

-- Cursos de ejemplo
INSERT INTO cursos (nombre, descripcion, fecha_inicio, fecha_fin, duracion_horas, cupo_maximo, estado, instructor_id)
VALUES
('IntroducciÃ³n a Spring Boot',
 'Curso bÃ¡sico de Spring Boot para construir APIs y aplicaciones web.',
 '2025-11-20', '2025-11-22', 12, 30, 'PROGRAMADO', 1),
('Fundamentos de Seguridad con Spring Security',
 'Buenas prÃ¡cticas de autenticaciÃ³n y autorizaciÃ³n.',
 '2025-11-25', '2025-11-27', 8, 25, 'PROGRAMADO', 2);
```

### 3. Configurar `application.properties`

```properties
# ConfiguraciÃ³n de Base de Datos
spring.datasource.url=jdbc:mysql://localhost:3306/sistema_autenticacion?useSSL=false&serverTimezone=UTC
spring.datasource.username=tu_usuario
spring.datasource.password=tu_contraseÃ±a

# ConfiguraciÃ³n JPA
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Puerto del servidor
server.port=8080
```

### 4. Ejecutar la AplicaciÃ³n

#### Con Maven

```bash
mvn clean install
mvn spring-boot:run
```

#### Desde IDE

Ejecuta la clase principal `Application.java` como aplicaciÃ³n Java.

### 5. Acceder al Sistema

Abre tu navegador en: `http://localhost:8080`

---

## ğŸ” Roles y AutenticaciÃ³n

### Credenciales de Prueba

| Rol | Usuario | ContraseÃ±a | Permisos |
|-----|---------|------------|----------|
| **ADMIN** | `admin` | `Admin123!` | GestiÃ³n completa del sistema |
| **EMPLEADO** | `user` | `User123!` | VisualizaciÃ³n e inscripciÃ³n a cursos |

> âš ï¸ **Importante**: Cambia las contraseÃ±as predeterminadas en un entorno de producciÃ³n.

### Permisos por Rol

#### Administrador (ADMIN)
- âœ… CRUD de cursos
- âœ… CRUD de instructores
- âœ… GestiÃ³n de empleados
- âœ… Reportes y estadÃ­sticas

#### Empleado (EMPLEADO)
- âœ… Visualizar cursos disponibles
- âœ… Inscribirse a cursos
- âœ… Ver mis inscripciones
- âœ… Editar perfil personal

---

## ğŸ“ Estructura del Proyecto

```
M6_EV_PORTAFOLIO/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/empresa/capacitacion/
â”‚   â”‚   â”‚       â”œâ”€â”€ config/          # ConfiguraciÃ³n de Spring Security
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/      # Controladores MVC y REST
â”‚   â”‚   â”‚       â”œâ”€â”€ model/           # Entidades JPA
â”‚   â”‚   â”‚       â”œâ”€â”€ repository/      # Repositorios Spring Data
â”‚   â”‚   â”‚       â”œâ”€â”€ service/         # LÃ³gica de negocio
â”‚   â”‚   â”‚       â””â”€â”€ dto/             # Data Transfer Objects
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ templates/           # Vistas Thymeleaf
â”‚   â”‚       â”œâ”€â”€ static/              # Recursos estÃ¡ticos
â”‚   â”‚       â””â”€â”€ application.properties
â”‚   â””â”€â”€ test/                        # Tests unitarios e integraciÃ³n
â”œâ”€â”€ docs/                            # DocumentaciÃ³n y diagramas
â”œâ”€â”€ pom.xml
â””â”€â”€ README.md
```

---

## ğŸŒ API REST

### Endpoints Disponibles

#### Cursos

**Listar todos los cursos**
```http
GET /api/cursos
Authorization: Basic {credentials}
```

**Respuesta**
```json
[
  {
    "id": 1,
    "nombre": "IntroducciÃ³n a Spring Boot",
    "descripcion": "Curso bÃ¡sico...",
    "fechaInicio": "2025-11-20",
    "fechaFin": "2025-11-22",
    "duracionHoras": 12,
    "cupoMaximo": 30,
    "estado": "PROGRAMADO",
    "instructor": {
      "id": 1,
      "nombreCompleto": "Ana PÃ©rez",
      "especialidad": "Java Backend"
    }
  }
]
```

#### Inscripciones

**Inscribir empleado a curso**
```http
POST /api/inscripciones
Authorization: Basic {credentials-empleado}
Content-Type: application/json

{
  "cursoId": 1
}
```

**Respuestas Posibles**

| CÃ³digo | DescripciÃ³n |
|--------|-------------|
| 201 | InscripciÃ³n exitosa |
| 400 | Empleado ya inscrito en el curso |
| 403 | Solo empleados pueden inscribirse |
| 404 | Curso no encontrado |

---

## ğŸ§­ NavegaciÃ³n Web

### Rutas Principales

| Ruta | DescripciÃ³n | Acceso |
|------|-------------|--------|
| `/login` | PÃ¡gina de inicio de sesiÃ³n | PÃºblico |
| `/panel` | Panel principal (redirige segÃºn rol) | Autenticado |
| `/admin/cursos` | GestiÃ³n de cursos | ADMIN |
| `/admin/instructores` | GestiÃ³n de instructores | ADMIN |
| `/empleado/cursos` | CatÃ¡logo de cursos disponibles | EMPLEADO |
| `/empleado/inscripciones` | Mis inscripciones | EMPLEADO |
| `/perfil` | Datos del usuario | Autenticado |
| `/logout` | Cerrar sesiÃ³n | Autenticado |

---

## ğŸ“Š Diagramas del Sistema

### Diagrama de Clases
![Diagrama de Clases](docs/DIAGRAMA_DE_CLASES.png)

### Diagrama de NavegaciÃ³n
![Diagrama de NavegaciÃ³n](docs/DIAGRAMA_DE_NAVEGACION_WEB.png)

### Diagrama de Arquitectura
![Diagrama de Arquitectura](docs/DIAGRAMA_DE_ARQUITECTURA.png)

### Diagrama de Secuencia
![Diagrama de Secuencia](docs/DIAGRAMA_DE_SECUENCIA.png)

---

## ğŸ§ª Pruebas

### Pruebas con Postman

1. **Importar la colecciÃ³n** ubicada en `/docs/postman/`
2. **Configurar las variables de entorno**:
   - `base_url`: `http://localhost:8080`
   - `admin_username`: `admin`
   - `admin_password`: `Admin123!`
   - `empleado_username`: `user`
   - `empleado_password`: `User123!`

3. **Ejecutar las pruebas** en el orden sugerido:
   - âœ… Login Admin
   - âœ… Listar Cursos
   - âœ… Crear Curso
   - âœ… Login Empleado
   - âœ… Inscribirse a Curso

### Pruebas Unitarias

```bash
mvn test
```

---

## ğŸ“ Licencia

Este proyecto estÃ¡ licenciado bajo la Licencia MIT. Consulta el archivo [LICENSE](LICENSE) para mÃ¡s detalles.

---

## ğŸ‘¤ Autor

**Manuel Ibarra**  
Bootcamp Java - Proyecto Evaluativo MÃ³dulo 6
